stage('Build') {
    // The first milestone step starts tracking concurrent build order
    milestone()
    node {
        echo "Building"
        checkout scm
        app = docker.build("frontendcontainer")
        //apply the dockerfile and push the image, nothing else needed
    }
}

//lock(resource: 'myResource', inversePrecedence: true){
//    milestone()
//    node {
//        echo "testing"
//    }
//}

stage('Deploy') {
    input "Deploy?"
    milestone()
    node {
        echo "Deploying"
        //Pull the images in the EC2 Instances and make them run
    }
}
